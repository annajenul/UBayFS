<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="UBayFS">
<title>Block feature selection with UBayFS • UBayFS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Block feature selection with UBayFS">
<meta property="og:description" content="UBayFS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">UBayFS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/UBayFS.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/BFS_UBayFS.html">Block feature selection with UBayFS</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Block feature selection with UBayFS</h1>
                        <h4 data-toc-skip class="author">Anna Jenul,
Stefan Schrunner</h4>
            
            <h4 data-toc-skip class="date">2022-11-26</h4>
      
      
      <div class="d-none name"><code>BFS_UBayFS.Rmd</code></div>
    </div>

    
    
<style>
  body {
  text-align: justify;
  padding: 1em}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Block feature selection is essential in different fields of
application, including treatment outcome prediction in healthcare (for
diseases such as cancer). Commonly, data is available from multiple
sources, including clinical, genetic, and image data, where measurements
from a common source are aggregated into a feature block. In many cases,
however, not all data sources are relevant for machine learning models:
Suppose we suspected that image data would not contain additional
information to the other feature blocks. In that case, it might be
easier, in terms of data acquisition and availability, to favor models
that do not depend on all data sources at once. In order to detect that
a single feature block does not provide any additional information,
block feature selection can be deployed. UBayFS is able to cover this
scenario by specifying constraints on a block level.</p>
</div>
<div class="section level2">
<h2 id="ubayfs-example">UBayFS example<a class="anchor" aria-label="anchor" href="#ubayfs-example"></a>
</h2>
<p>At first we load the package and the Breast Cancer Wisconsin (BCW)
example dataset, which is described in the main vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://annajenul.github.io/UBayFS/">UBayFS</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</span></span>
<span><span class="co">#&gt; Warning: 'rgl.init' failed, running with 'rgl.useNULL = TRUE'.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bcw</span><span class="op">)</span></span></code></pre></div>
<p>For block feature selection, it is necessary to define each feature’s
block affiliation, which is provided either (a) via a block list, or (b)
via a block matrix.</p>
<div class="section level3">
<h3 id="version-a-block-list">Version (a): block list<a class="anchor" aria-label="anchor" href="#version-a-block-list"></a>
</h3>
<p>The first example demonstrates how a list of block indices can
provide the block structure of the dataset. We define three blocks for
the BCW dataset, where the first block contains features with indices 1
to 10, block two features with indices 11 to 20, and block three
features with indices 21 to 30.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">block_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">block_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="va">block_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span></span>
<span><span class="va">block_list</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fl">21</span><span class="op">:</span><span class="fl">30</span></span>
<span></span>
<span><span class="va">block_list</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;  [1] 11 12 13 14 15 16 17 18 19 20</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt;  [1] 21 22 23 24 25 26 27 28 29 30</span></span></code></pre></div>
<p>For the UBayFS model, we define a max-size block constraint
restricting the number of selected blocks to (up to) one. Thus, the
<code>constraint_vars</code> parameter is set to the maximum number of
blocks to be selected, and <code>num_elements</code> contains the number
of blocks, which equals the number of elements in the block_list.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">block_constraints</span> <span class="op">=</span> <span class="fu"><a href="../reference/buildConstraints.html">buildConstraints</a></span><span class="op">(</span>constraint_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"max_size"</span><span class="op">)</span>, </span>
<span>                                     constraint_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, </span>
<span>                                     num_elements <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">block_list</span><span class="op">)</span>, </span>
<span>                                     rho <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                                     block_list <span class="op">=</span> <span class="va">block_list</span><span class="op">)</span></span>
<span></span>
<span><span class="va">block_constraints</span></span>
<span><span class="co">#&gt; $A</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    1    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $b</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rho</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $block_matrix</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29] [,30]</span></span>
<span><span class="co">#&gt; [1,]    1    1    1    1    1    1    1    1    1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0    0    0    0    0     0     1     1     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="version-b-block-matrix">Version (b): block matrix<a class="anchor" aria-label="anchor" href="#version-b-block-matrix"></a>
</h3>
<p>Assuming the same block structure as for the block list, we
demonstrate how to specify the block structure in UBayFS via a block
matrix. The block matrix is a binary assignment matrix consisting of
rows representing the feature blocks and columns representing the
features in the dataset. Note that, in general, a feature may be
assigned to an arbitrary number of blocks (i.e., the row and column sums
are not restricted), but in practice, a partition of the feature set is
sufficient in most cases.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">block_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">bcw</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">block_matrix</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="va">block_matrix</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="va">block_matrix</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">21</span><span class="op">:</span><span class="fl">30</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span></span>
<span><span class="va">block_matrix</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29] [,30]</span></span>
<span><span class="co">#&gt; [1,]    1    1    1    1    1    1    1    1    1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0    0    0    0    0     0     1     1     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1</span></span></code></pre></div>
<p>The same block feature constraints as for the block list can be
produced using the block matrix. However, note that the
<code>num_elements</code> parameter, specifying the number of blocks,
has to be set to the number of rows in the block matrix:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">block_constraints</span> <span class="op">=</span> <span class="fu"><a href="../reference/buildConstraints.html">buildConstraints</a></span><span class="op">(</span>constraint_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"max_size"</span>, <span class="st">"must_link"</span><span class="op">)</span>, </span>
<span>                                     constraint_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                                     num_elements <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">block_matrix</span><span class="op">)</span>, </span>
<span>                                     rho <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                                     block_matrix <span class="op">=</span> <span class="va">block_matrix</span><span class="op">)</span></span>
<span></span>
<span><span class="va">block_constraints</span></span>
<span><span class="co">#&gt; $A</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    1    1</span></span>
<span><span class="co">#&gt; [2,]   -1    1    0</span></span>
<span><span class="co">#&gt; [3,]    1   -1    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $b</span></span>
<span><span class="co">#&gt; [1] 1 0 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rho</span></span>
<span><span class="co">#&gt; [1] 1 1 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $block_matrix</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29] [,30]</span></span>
<span><span class="co">#&gt; [1,]    1    1    1    1    1    1    1    1    1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0    0    0    0    0     0     1     1     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0     0     0     0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="block-wise-prior-weights">Block-wise prior weights<a class="anchor" aria-label="anchor" href="#block-wise-prior-weights"></a>
</h3>
<p>In addition to block-wise constraints, also prior weights may be
specified on block level rather than on feature level. Thus, we define a
help function to build the vector of prior block weights. Features from
the same block get assigned the same prior weight. In this example,
feature weights in block 1 are set to 0.5, feature weights in block 2
are set to 1, and feature weights in block 3 are set to 2.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">build_block_weights</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">blocks</span>, <span class="va">weights</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">weights</span><span class="op">[</span><span class="va">blocks</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">prior_weights</span> <span class="op">=</span> <span class="fu">build_block_weights</span><span class="op">(</span>blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="evaluation-of-block-feature-selection-results">Evaluation of block feature selection results<a class="anchor" aria-label="anchor" href="#evaluation-of-block-feature-selection-results"></a>
</h3>
<p>After specifying the block constraints, we initialize the UBayFS
model. In addition to the block constraints, we require that at most
three features are selected in total (max-size constraint).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># for reproducibility</span></span>
<span><span class="va">model</span> <span class="op">=</span> <span class="fu"><a href="../reference/build.UBaymodel.html">build.UBaymodel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bcw</span><span class="op">$</span><span class="va">data</span>,</span>
<span>                        target <span class="op">=</span> <span class="va">bcw</span><span class="op">$</span><span class="va">labels</span>,</span>
<span>                        M <span class="op">=</span> <span class="fl">100</span>, </span>
<span>                        tt_split <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>                        nr_features <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                        method <span class="op">=</span> <span class="st">"mRMR"</span>,</span>
<span>                        prior_model <span class="op">=</span><span class="st">"dirichlet"</span>,</span>
<span>                        weights <span class="op">=</span> <span class="va">prior_weights</span>,</span>
<span>                        lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                        constraints <span class="op">=</span> <span class="fu"><a href="../reference/buildConstraints.html">buildConstraints</a></span><span class="op">(</span>constraint_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"max_size"</span><span class="op">)</span>, </span>
<span>                                                       constraint_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, </span>
<span>                                                       num_elements <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">bcw</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>, </span>
<span>                                                       rho <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                        block_constraints <span class="op">=</span> <span class="va">block_constraints</span>,</span>
<span>                        optim_method <span class="op">=</span> <span class="st">"GA"</span>,</span>
<span>                        popsize <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                        maxiter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                        shiny <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>                        <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;  UBayFS model summary </span></span>
<span><span class="co">#&gt;   data:  569x30 </span></span>
<span><span class="co">#&gt;   labels:  B: 357 M: 212 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === prior constraints === </span></span>
<span><span class="co">#&gt;   constraint 1: (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1) x &lt;= 3; rho = 1 </span></span>
<span><span class="co">#&gt;   block constraint 1: (1,1,1) x &lt;= 1; rho = 1</span></span>
<span><span class="co">#&gt;  block constraint 2: (-1,1,0) x &lt;= 0; rho = 1</span></span>
<span><span class="co">#&gt;  block constraint 3: (1,-1,0) x &lt;= 0; rho = 1  </span></span>
<span><span class="co">#&gt;   === prior weights === </span></span>
<span><span class="co">#&gt;   weights: ( 0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2 ) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === likelihood === </span></span>
<span><span class="co">#&gt;   ensemble counts: ( 0,9,76,0,0,0,100,100,0,0,0,0,3,100,0,0,4,0,0,0,100,89,100,100,1,18,100,100,0,0 ) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === feature selection results === </span></span>
<span><span class="co">#&gt;  no output produced yet</span></span></code></pre></div>
<p>We observe, that the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> prints an additional line
for block constraints. All further steps are similar to the UBayFS
variant without block constraints. In this example, three features from
the third block are selected. Hence, all constraints are fulfilled.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">=</span> <span class="fu">UBayFS</span><span class="fu">::</span><span class="fu"><a href="../reference/train.html">train</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Running Genetic Algorithm"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;  UBayFS model summary </span></span>
<span><span class="co">#&gt;   data:  569x30 </span></span>
<span><span class="co">#&gt;   labels:  B: 357 M: 212 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === prior constraints === </span></span>
<span><span class="co">#&gt;   constraint 1: (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1) x &lt;= 3; rho = 1 </span></span>
<span><span class="co">#&gt;   block constraint 1: (1,1,1) x &lt;= 1; rho = 1</span></span>
<span><span class="co">#&gt;  block constraint 2: (-1,1,0) x &lt;= 0; rho = 1</span></span>
<span><span class="co">#&gt;  block constraint 3: (1,-1,0) x &lt;= 0; rho = 1  </span></span>
<span><span class="co">#&gt;   === prior weights === </span></span>
<span><span class="co">#&gt;   weights: ( 0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2 ) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === likelihood === </span></span>
<span><span class="co">#&gt;   ensemble counts: ( 0,9,76,0,0,0,100,100,0,0,0,0,3,100,0,0,4,0,0,0,100,89,100,100,1,18,100,100,0,0 ) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   === feature selection results === </span></span>
<span><span class="co">#&gt;   ( 21,24,27 )</span></span>
<span><span class="co">#&gt;  ( 21,24,28 )</span></span>
<span><span class="co">#&gt;  ( 21,23,28 )</span></span>
<span><span class="co">#&gt;  ( 21,27,28 )</span></span>
<span><span class="co">#&gt;  ( 21,23,24 )</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Warning: multiple optimal feature sets, plotting first feature set."</span></span></code></pre></div>
<p><img src="BFS_UBayFS_files/figure-html/unnamed-chunk-8-1.png" width="768" style="display: block; margin: auto;"></p>
<p>In the plot, block constraints are shown with dashed lines, while
solid lines represent ordinary (feature-)constraints. As demonstrated,
blocks 1 and 2 are connected via a must-link constraint (dotted line
between features of block 1 and block 2)¨.</p>
<p>Properties of the final feature set(s):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/evaluateFS.html">evaluateMultiple</a></span><span class="op">(</span>state <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">output</span><span class="op">$</span><span class="va">feature_set</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, model <span class="op">=</span> <span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                       1</span></span>
<span><span class="co">#&gt; cardinality                        3.00</span></span>
<span><span class="co">#&gt; log total utility                 -1.22</span></span>
<span><span class="co">#&gt; log posterior feature utility     -1.22</span></span>
<span><span class="co">#&gt; log admissibility                  0.00</span></span>
<span><span class="co">#&gt; log block admissibility            0.00</span></span>
<span><span class="co">#&gt; number violated constraints        0.00</span></span>
<span><span class="co">#&gt; number violated block-constraints  0.00</span></span>
<span><span class="co">#&gt; avg feature correlation            0.77</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The specification of block constraints in the UBayFS model follows
the same syntax as ordinary feature set constraints. Thus, block
constraints can be easily integrated and combined with feature-wise
constraints. Further, the framework allows setting arbitrary linear
constraints for blocks, as well as for single features.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Anna Jenul.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
